# 开发环境准备

## 配置文件管理

项目使用统一的配置文件管理系统，前后端端口配置集中在配置文件中管理。详细说明请参考：[配置文件管理说明](../../conf/README.md)

### 快速开始

1. **修改端口配置**（如需要）：
   - 编辑 `conf/shared.json` 修改端口
   - 编辑 `conf/dev/config.toml` 或 `conf/prod/config.toml` 修改后端配置
   - 运行 `cd frontend && npm run config:generate` 更新前端配置

2. **启动开发环境**（在 WSL 中）：
   ```bash
   # 方式1: 分离终端窗口启动（推荐）- 前后端在不同窗口，方便查看日志
   make dev
   
   # 方式2: 分别启动
   # 启动后端（端口从 conf/dev/config.toml 读取）
   bash scripts/dev/start_backend.sh start
   
   # 启动前端（端口从 conf/shared.json 读取，在 WSL 中运行）
   bash scripts/dev/start_frontend.sh start
   ```
   
   **注意**：
   - 后端和前端都应该在 WSL 中运行，以便统一管理
   - 如果 Node.js 未在 WSL 中安装，脚本会提示安装方法

## 安装 Rust (在 WSL 中)

```bash
# 在 WSL 中执行
wsl

# 安装 Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y

# 加载 Rust 环境
source ~/.cargo/env

# 验证安装
cargo --version

# 安装 OpenSSL 开发库（如果缺少）
sudo apt update
sudo apt install -y libssl-dev pkg-config
```

## 安装 Node.js (在 WSL 中)

**重要**：前端服务应在 WSL 中运行以便统一管理。

```bash
# 在 WSL 中执行
wsl

# 安装 Node.js LTS 版本
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs

# 验证安装
node --version
npm --version
```

**注意**：
- 确保在 WSL 中安装 Node.js，而不是使用 Windows 版本的 Node.js
- 如果检测到使用 Windows 版本的 Node.js，启动脚本会给出警告提示

## 代码质量检查

```powershell

# 安装clippy工具
wsl bash -c "cd /mnt/d/Git/Cursor-in-action/go/starrocks-admin/backend && source ~/.cargo/env && cargo clippy --all-targets --all-features -- -D warnings"

# 检查Rust代码格式
wsl bash -c "cd /mnt/d/Git/Cursor-in-action/go/starrocks-admin/backend && source ~/.cargo/env && cargo fmt --check"

# 修复格式问题
wsl bash -c "cd /mnt/d/Git/Cursor-in-action/go/starrocks-admin/backend && source ~/.cargo/env && cargo fmt"

# 安装cargo-audit工具
wsl bash -c "cd /mnt/d/Git/Cursor-in-action/go/starrocks-admin/backend && source ~/.cargo/env && cargo install cargo-audit"

# 运行Rust安全审计
wsl bash -c "cd /mnt/d/Git/Cursor-in-action/go/starrocks-admin/backend && source ~/.cargo/env && cargo audit"

```

## starrocks 要求
starrocks_audit_db__


## git 

git remote add lxpgit https://github.com/xiaopingli348-sudo/starrocks-admin.git

xiaopingli348-sudo lxp@122508

D:\Git\Cursor-in-action\go\starrocks-admin>git remote -v
lxpgit  https://github.com/xiaopingli348-sudo/starrocks-admin.git (fetch)
lxpgit  https://github.com/xiaopingli348-sudo/starrocks-admin.git (push)
origin  https://github.com/jlon/starrocks-admin.git (fetch)
origin  https://github.com/jlon/starrocks-admin.git (push)


# 推送代码到您自己仓库的main分支
git push lxpgit main
xiaopingli348@gmail.com Lxp@122508

# 或者如果您在其他分支上开发
git push myrepo 您的分支名:main

# 将myrepo设置为默认推送仓库
git push -u myrepo main


## Starrocks 配置
10.1.8.88
8030 -> 31557
9030 -> 31604

root / hzguode@8848
